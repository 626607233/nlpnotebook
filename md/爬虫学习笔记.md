## 爬虫学习笔记



笔记来源微信公众号《学习python的正确姿势》，由于是笔记，只为提取重点信息，原文会更有趣一点。

欢迎支持和打赏入群。



### 爬虫是怎么玩的？

在互联网上许许多多的网站它们都是托管在服务器上的，这些服务器 24 小时运行着，时时刻刻，兢兢业业的等待着别人的请求，所以，我们的爬虫，首先会模拟请求，就好像你在浏览器输入网址，然后回车那样，爬虫可以用到一些 Http 库向指定的服务器偷偷摸摸的发起请求，这个时候爬虫可以假装自己是浏览器（添加一些header信息），大多数的服务器呢，傻不拉的以为是浏览器发送请求，就直接返回数据给爬虫了。



### 在 Chrome 浏览器轻松抓包

#### 请求

国产浏览器，很多是有后门的，尽量不要用

打开chrome

进入www.baidu.com

按下F12，可以看到Element 标签下对应的 HTML 代码

点击 Network 这个标签，刷新一下，可以看到很多请求

![1559005840568](C:\Users\kenshinpg\AppData\Roaming\Typora\typora-user-images\1559005840568.png)

HTTP 的请求方式有好几种，

GET, POST, PUT, DELETE, HEAD, OPTIONS, TRACE

不过最常见的就是 GET 和 POST 请求



##### GET请求

https://www.baidu.com/s?wd=%E8%8B%8D%E8%80%81%E5%B8%88&rsv_spt=1&rsv_iqid=0xad707ee600011b25&issp=1&f=8&rsv_bp=1&rsv_idx=2&ie=utf-8&rqlang=cn&tn=baiduhome_pg&rsv_enter=0&oq=%25E8%258B%258D%25E8%2580%2581%25E5%25B8%2588&rsv_t=5d8eqNDy4ZpyUOz7ByzyIMYfH5Jc7861dr4CFQaY3WCiDnOpBLob6Eouk23%2F3L%2BTD46O&rsv_sug3=15&rsv_pq=996e776f0000df06&rsv_sug4=19123

在 ？后面的这些 jb 玩意儿就是 GET 请求的参数，这些参数以「键值对」的形式实现

比如这里的

wd=%E8%8B%8D%E8%80%81%E5%B8%88

所以以后我们在 Python 写 GET 请求的时候，直接在 URL 后面加个 ？然后添加参数值就好了。如：https://www.baidu.com/s?wd=波多野结衣



##### POST请求

我们在做一些**信息提交**的时候， 比如注册，登录，这时候我们做的就是 POST 请求，POST 的参数不会直接放在 URL 上，会以 Form 表单的形式将数据提交给服务器。

当我们点击登录的时候，就开始将我们的账号密码请求给百度服务器，可以看到我们请求了 login 这个接口，请求方法就是 POST。

![1559006235499](C:\Users\kenshinpg\AppData\Roaming\Typora\typora-user-images\1559006235499.png)

而我们的请求参数是以 Form 表单的方式提交的

![1559006255245](C:\Users\kenshinpg\AppData\Roaming\Typora\typora-user-images\1559006255245.png)

username 就是 xiaoshuaib

而密码，就是被加密了的，这些都是 POST 参数

GET请求把请求参数都暴露在URL上，而POST请求的参数放在request body 里面，POST请求方式还对密码参数加了密，这样就相对安全一些



ok

你已经了解请求方式了

接下来说说**请求头**



##### 请求头

我们刚刚在访问百度的时候，可以看到

![1559006415011](C:\Users\kenshinpg\AppData\Roaming\Typora\typora-user-images\1559006415011.png)

这个就是请求头，**Request Header**

我们在做 HTTP 请求的时候，除了提交一些参数之外，我们还有定义一些 HTTP 请求的头部信息，比如 Accept、Host、cookie、User-Agent等等，这些参数也是我们在做爬虫要用到，通过这些信息，欺骗服务器，告诉它我们是正规请求。

比如，我们可以在代码里面设置 cookie 告诉服务器我们就是在这个浏览器请求的会话，User-Agent 告诉服务器我们是浏览器请求的。



#### 响应

##### 服务器响应

 404 啊，200啊，301啊，502啊，都是服务器的响应码，一般服务器给我们返回 200，那就说明，我们成功请求了。



##### 响应头

![1559006601069](C:\Users\kenshinpg\AppData\Roaming\Typora\typora-user-images\1559006601069.png)

当我们请求成功之后，服务器会给我们返回响应码之外，还有响应头。